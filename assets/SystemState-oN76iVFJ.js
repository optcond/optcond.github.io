import{j as r}from"./query-Df61bAsc.js";import{C as n}from"./index-pmWIQi70.js";import{a as u,U as h,C as p,b as g,G as f,c as j,d as v}from"./lucide-fc_sQejf.js";import{R as C,L as y,C as N,X as T,Y as S,T as k,a as w}from"./recharts-wdVATIY2.js";import"./react-uYZGv8Ap.js";import"./supabase-CskpBK-R.js";const s=({label:t,value:o,subtitle:a,borderColor:i,icon:l})=>r.jsxs("div",{className:`relative w-full p-4 rounded-xl bg-card/40 border-l-4 ${i} min-w-[180px]`,children:[l&&r.jsx(l,{className:"absolute top-3 right-3 h-5 w-5 text-muted-foreground/40"}),r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:t}),r.jsx("div",{className:"text-2xl font-bold mb-1",children:o}),r.jsx("div",{className:"text-xs text-muted-foreground",children:a})]}),G=({tcr:t,tcrMinus10:o,tcrMinus20:a,totalCollateral:i,totalDebt:l,totalTroves:c,chartData:m,isLoading:x})=>{const d=e=>e<1.2?"border-critical":e<1.6?"border-high":e<2?"border-elevated":"border-primary";return x?r.jsxs(n,{className:"glass-card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System State"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-24 bg-muted/20 animate-pulse rounded-xl"}),r.jsx("div",{className:"h-64 bg-muted/20 animate-pulse rounded-xl"})]})]}):r.jsxs(n,{className:"glass-card p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-primary",children:[r.jsx(u,{className:"h-5 w-5 text-primary"}),"System State"]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6 sm:grid-cols-2 lg:grid-cols-3",children:[r.jsx(s,{label:"Total Troves",value:c.toLocaleString(),subtitle:"Active positions",borderColor:"border-primary",icon:h}),r.jsx(s,{label:"Total Collateral",value:`${i.toFixed(2)} BTC`,subtitle:"System-wide",borderColor:"border-primary",icon:p}),r.jsx(s,{label:"Total Debt",value:`${l.toFixed(2)} MUSD`,subtitle:"System-wide",borderColor:"border-primary",icon:g}),r.jsx(s,{label:"TCR",value:`${(t*100).toFixed(1)}%`,subtitle:"Total Collateral Ratio",borderColor:d(t),icon:f}),r.jsx(s,{label:"TCR -10%",value:`${(o*100).toFixed(1)}%`,subtitle:"10% price drop",borderColor:d(o),icon:j}),r.jsx(s,{label:"TCR -20%",value:`${(a*100).toFixed(1)}%`,subtitle:"20% price drop",borderColor:d(a),icon:v})]}),r.jsxs("div",{className:"bg-card/40 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-semibold mb-4 text-muted-foreground",children:"30-Day TCR History"}),r.jsx(C,{width:"100%",height:240,children:r.jsxs(y,{data:m,children:[r.jsx(N,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),r.jsx(T,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"},tickLine:!1}),r.jsx(S,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"},tickLine:!1,domain:[e=>e*.9,e=>e*1.1],tickFormatter:e=>e.toFixed(2)}),r.jsx(k,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"},formatter:(e,b)=>b==="tcr"?[`${(e*100).toFixed(2)}%`,"TCR"]:[`$${e.toLocaleString()}`,"BTC Price"]}),r.jsx(w,{type:"monotone",dataKey:"tcr",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))",r:4},activeDot:{r:6}})]})})]})]})};export{G as SystemState};
