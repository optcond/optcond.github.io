import{j as e}from"./query-Df61bAsc.js";import{r as p}from"./react-uYZGv8Ap.js";import{C as i,B as n,S as r,b as u}from"./index-CpERQJG0.js";import{T as j,a as f,b as c,c as m}from"./tabs-BRpASkQ1.js";import{H as g,e as N,E as b}from"./lucide-fc_sQejf.js";import"./recharts-wdVATIY2.js";import"./supabase-CskpBK-R.js";const v=s=>s.length<=12?s:`${s.slice(0,6)}...${s.slice(-4)}`,d=({type:s,data:t,txHash:l})=>e.jsxs("div",{className:"p-4 rounded-lg bg-card/30 border border-card-border/40 hover:bg-card/50 transition-smooth",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold capitalize",children:s}),s==="liquidation"&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground font-mono",children:v(t.borrower)})]}),e.jsxs(n,{variant:"outline",className:"text-xs font-mono",children:["#",t.block_number.toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 mb-2 text-sm sm:grid-cols-2",children:s==="liquidation"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Debt:"})," ",e.jsxs("span",{className:"font-medium",children:[t.debt.toFixed(2)," MUSD"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Collateral:"})," ",e.jsxs("span",{className:"font-medium",children:[t.collateral.toFixed(4)," BTC"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Attempted:"})," ",e.jsxs("span",{className:"font-medium",children:[t.attempted_amount.toFixed(2)," MUSD"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Actual:"})," ",e.jsxs("span",{className:"font-medium",children:[t.actual_amount.toFixed(2)," MUSD"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Collateral:"})," ",e.jsxs("span",{className:"font-medium",children:[t.collateral_sent.toFixed(4)," BTC"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Fee:"})," ",e.jsxs("span",{className:"font-medium",children:[t.collateral_fee.toFixed(4)," BTC"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:new Date(t.block_timestamp).toLocaleString()}),e.jsxs(u,{variant:"ghost",size:"sm",className:"h-7 gap-1",onClick:()=>window.open(`https://explorer.mezo.org/tx/${l}`,"_blank"),children:[e.jsx(b,{className:"h-3 w-3"}),"View"]})]})]}),o=({type:s})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(N,{className:"h-12 w-12 text-muted-foreground/40 mb-3"}),e.jsxs("p",{className:"text-muted-foreground",children:["No recent ",s,". Confirm the indexer is running."]})]}),_=({liquidations:s,redemptions:t,isLoading:l})=>{const[x,h]=p.useState("liquidations");return l?e.jsxs(i,{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Latest Activity"}),e.jsx("div",{className:"h-64 bg-muted/20 animate-pulse rounded-xl"})]}):e.jsx(i,{className:"glass-card p-6",children:e.jsxs(j,{value:x,onValueChange:h,children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 text-primary",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),"Latest Activity"]}),e.jsxs(f,{className:"flex w-full flex-wrap gap-2 bg-transparent p-0 sm:w-auto sm:flex-nowrap sm:bg-muted/10 sm:p-1",children:[e.jsxs(c,{value:"liquidations",className:"flex-1 min-w-[140px] sm:flex-none",children:["Liquidations",e.jsx(n,{variant:"secondary",className:"ml-2",children:s.length})]}),e.jsxs(c,{value:"redemptions",className:"flex-1 min-w-[140px] sm:flex-none",children:["Redemptions",e.jsx(n,{variant:"secondary",className:"ml-2",children:t.length})]})]})]}),e.jsx(m,{value:"liquidations",children:s.length===0?e.jsx(o,{type:"liquidations"}):e.jsx(r,{className:"h-[360px] pr-2 md:pr-4",children:e.jsx("div",{className:"space-y-3",children:s.map(a=>e.jsx(d,{type:"liquidation",data:a,txHash:a.tx_hash},a.id))})})}),e.jsx(m,{value:"redemptions",children:t.length===0?e.jsx(o,{type:"redemptions"}):e.jsx(r,{className:"h-[360px] pr-2 md:pr-4",children:e.jsx("div",{className:"space-y-3",children:t.map(a=>e.jsx(d,{type:"redemption",data:a,txHash:a.tx_hash},a.id))})})})]})})};export{_ as LatestActivity};
