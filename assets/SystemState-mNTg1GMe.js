import{j as r}from"./query-CpGXJd7o.js";import{C as m}from"./index-8jBMxRYr.js";import{f as u}from"./formatNumber-BiSiC57o.js";import{L as h,U as p,C as g,a as f,G as j,A as v,b as C}from"./lucide-Chui0JB9.js";import{R as y,L as N,C as T,X as S,Y as k,T as w,a as D}from"./recharts-CblCIUsG.js";import"./react-uYZGv8Ap.js";import"./supabase-CskpBK-R.js";const t=({label:s,value:o,subtitle:a,borderColor:l,icon:i})=>r.jsxs("div",{className:`relative w-full p-4 rounded-xl bg-card/40 border-l-4 ${l} min-w-[180px]`,children:[i&&r.jsx(i,{className:"absolute top-3 right-3 h-5 w-5 text-muted-foreground/40"}),r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:s}),r.jsx("div",{className:"text-2xl font-bold mb-1",children:o}),r.jsx("div",{className:"text-xs text-muted-foreground",children:a})]}),B=({tcr:s,tcrMinus10:o,tcrMinus20:a,totalCollateral:l,totalDebt:i,totalTroves:n,chartData:c,isLoading:x})=>{const d=e=>e<1.2?"border-critical":e<1.6?"border-high":e<2?"border-elevated":"border-primary";return x?r.jsxs(m,{className:"glass-card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System State"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-24 bg-muted/20 animate-pulse rounded-xl"}),r.jsx("div",{className:"h-64 bg-muted/20 animate-pulse rounded-xl"})]})]}):r.jsxs(m,{className:"glass-card p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-primary",children:[r.jsx(h,{className:"h-5 w-5 text-primary"}),"System State"]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6 sm:grid-cols-2 lg:grid-cols-3",children:[r.jsx(t,{label:"Total Troves",value:n.toLocaleString(),subtitle:"Active positions",borderColor:"border-primary",icon:p}),r.jsx(t,{label:"Total Collateral",value:`${l.toFixed(2)} BTC`,subtitle:"System-wide",borderColor:"border-primary",icon:g}),r.jsx(t,{label:"Total Debt",value:`${u(i,{minimumFractionDigits:2,maximumFractionDigits:2})} MUSD`,subtitle:"System-wide",borderColor:"border-primary",icon:f}),r.jsx(t,{label:"TCR",value:`${(s*100).toFixed(1)}%`,subtitle:"Total Collateral Ratio",borderColor:d(s),icon:j}),r.jsx(t,{label:"TCR -10%",value:`${(o*100).toFixed(1)}%`,subtitle:"10% price drop",borderColor:d(o),icon:v}),r.jsx(t,{label:"TCR -20%",value:`${(a*100).toFixed(1)}%`,subtitle:"20% price drop",borderColor:d(a),icon:C})]}),r.jsxs("div",{className:"bg-card/40 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-semibold mb-4 text-muted-foreground",children:"30-Day TCR History"}),r.jsx(y,{width:"100%",height:240,children:r.jsxs(N,{data:c,children:[r.jsx(T,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),r.jsx(S,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"},tickLine:!1}),r.jsx(k,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"},tickLine:!1,domain:[e=>e*.9,e=>e*1.1],tickFormatter:e=>e.toFixed(2)}),r.jsx(w,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"},formatter:(e,b)=>b==="tcr"?[`${(e*100).toFixed(2)}%`,"TCR"]:[`$${e.toLocaleString()}`,"BTC Price"]}),r.jsx(D,{type:"monotone",dataKey:"tcr",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))",r:4},activeDot:{r:6}})]})})]})]})};export{B as SystemState};
