import{j as e}from"./query-Df61bAsc.js";import{C as n}from"./index-rJrFDixO.js";import{c as u,U as h,C as p,d as g,G as f,e as j,f as v}from"./lucide-DvnUXODX.js";import{R as C,L as y,C as N,X as T,Y as S,T as k,a as w}from"./recharts-wdVATIY2.js";import"./react-uYZGv8Ap.js";import"./supabase-CskpBK-R.js";const s=({label:t,value:o,subtitle:a,borderColor:i,icon:l})=>e.jsxs("div",{className:`relative w-full p-4 rounded-xl bg-card/40 border-l-4 ${i} min-w-[180px]`,children:[l&&e.jsx(l,{className:"absolute top-3 right-3 h-5 w-5 text-muted-foreground/40"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:t}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:o}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a})]}),G=({tcr:t,tcrMinus10:o,tcrMinus20:a,totalCollateral:i,totalDebt:l,totalTroves:c,chartData:m,isLoading:x})=>{const d=r=>r<1.2?"border-critical":r<1.6?"border-high":r<2?"border-elevated":"border-primary";return x?e.jsxs(n,{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System State"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-24 bg-muted/20 animate-pulse rounded-xl"}),e.jsx("div",{className:"h-64 bg-muted/20 animate-pulse rounded-xl"})]})]}):e.jsxs(n,{className:"glass-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-primary",children:[e.jsx(u,{className:"h-5 w-5 text-primary"}),"System State"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(s,{label:"Total Troves",value:c.toLocaleString(),subtitle:"Active positions",borderColor:"border-primary",icon:h}),e.jsx(s,{label:"Total Collateral",value:`${i.toFixed(2)} BTC`,subtitle:"System-wide",borderColor:"border-primary",icon:p}),e.jsx(s,{label:"Total Debt",value:`${l.toFixed(2)} MUSD`,subtitle:"System-wide",borderColor:"border-primary",icon:g}),e.jsx(s,{label:"TCR",value:`${(t*100).toFixed(1)}%`,subtitle:"Total Collateral Ratio",borderColor:d(t),icon:f}),e.jsx(s,{label:"TCR -10%",value:`${(o*100).toFixed(1)}%`,subtitle:"10% price drop",borderColor:d(o),icon:j}),e.jsx(s,{label:"TCR -20%",value:`${(a*100).toFixed(1)}%`,subtitle:"20% price drop",borderColor:d(a),icon:v})]}),e.jsxs("div",{className:"bg-card/40 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-muted-foreground",children:"30-Day TCR History"}),e.jsx(C,{width:"100%",height:240,children:e.jsxs(y,{data:m,children:[e.jsx(N,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),e.jsx(T,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"},tickLine:!1}),e.jsx(S,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"},tickLine:!1,domain:[r=>r*.9,r=>r*1.1],tickFormatter:r=>r.toFixed(2)}),e.jsx(k,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"},formatter:(r,b)=>b==="tcr"?[`${(r*100).toFixed(2)}%`,"TCR"]:[`$${r.toLocaleString()}`,"BTC Price"]}),e.jsx(w,{type:"monotone",dataKey:"tcr",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))",r:4},activeDot:{r:6}})]})})]})]})};export{G as SystemState};
