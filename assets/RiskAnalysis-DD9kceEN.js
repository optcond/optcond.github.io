import{j as e}from"./query-Df61bAsc.js";import{C as n,A as v,a as p}from"./index-n-WSL4En.js";import{S as b,O as m,T as g,g as f,h as N,i as C}from"./lucide-DR8pGVsZ.js";import{R as k,P as R,b as A,d as w,T as y,e as S}from"./recharts-wdVATIY2.js";import"./react-uYZGv8Ap.js";import"./supabase-CskpBK-R.js";const c=({title:s,count:l,collateral:t,description:a,icon:d,color:o,iconColor:r})=>e.jsxs("div",{className:`p-4 rounded-xl bg-card/40 border-l-4 ${o}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold",children:s}),e.jsx(d,{className:`h-5 w-5 ${r}`})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:l}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:[t.toFixed(4)," BTC"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a})]}),H=({critical:s,high:l,elevated:t,safe:a,isLoading:d})=>{const o=[{name:"Critical <1.2",value:s.count,color:"hsl(var(--critical))"},{name:"High 1.2-1.6",value:l.count,color:"hsl(var(--high))"},{name:"Elevated 1.6-2.0",value:t.count,color:"hsl(var(--elevated))"},{name:"Safe ≥2.0",value:a.count,color:"hsl(var(--safe))"}];return d?e.jsxs(n,{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Risk Analysis"}),e.jsx("div",{className:"h-64 bg-muted/20 animate-pulse rounded-xl"})]}):e.jsxs(n,{className:"glass-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-primary",children:[e.jsx(b,{className:"h-5 w-5 text-high"}),"Risk Analysis"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(c,{title:"Critical <1.2",count:s.count,collateral:s.collateral,description:"Immediate liquidation risk",icon:m,color:"border-critical",iconColor:"text-critical"}),e.jsx(c,{title:"High 1.2–1.6",count:l.count,collateral:l.collateral,description:"High risk threshold",icon:g,color:"border-high",iconColor:"text-high"}),e.jsx(c,{title:"Elevated 1.6–2.0",count:t.count,collateral:t.collateral,description:"Moderate risk level",icon:f,color:"border-elevated",iconColor:"text-elevated"}),e.jsx(c,{title:"Safe ≥2.0",count:a.count,collateral:a.collateral,description:"Low risk level",icon:N,color:"border-safe",iconColor:"text-safe"})]}),e.jsxs("div",{className:"bg-card/40 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 text-muted-foreground flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Risk Distribution"]}),e.jsx(k,{width:"100%",height:240,children:e.jsxs(R,{children:[e.jsx(A,{data:o,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.map((r,i)=>e.jsx(w,{fill:r.color},`cell-${i}`))}),e.jsx(y,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(S,{verticalAlign:"bottom",height:36,formatter:(r,i)=>{const x=o.reduce((u,j)=>u+j.value,0),h=(i.payload.value/x*100).toFixed(1);return`${r}: ${i.payload.value} (${h}%)`}})]})})]}),s.count>0&&e.jsxs(v,{variant:"destructive",className:"mt-6",children:[e.jsx(m,{className:"h-4 w-4 text-critical"}),e.jsxs(p,{children:[s.count," trove",s.count>1?"s":""," below 1.2 CR with ",s.collateral.toFixed(4)," BTC at risk of liquidation"]})]})]})};export{H as RiskAnalysis};
